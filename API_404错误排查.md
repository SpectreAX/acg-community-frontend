# ğŸ”§ API 404 é”™è¯¯æ’æŸ¥æŒ‡å—

## é—®é¢˜è¯Šæ–­

ä»é”™è¯¯æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼š
```
GET http://localhost:5173/api/video/play-auth/e0555dd6d43d71f0803f5017f0f80102 404 (Not Found)
AxiosError: Request failed with status code 404
```

**åŸå› åˆ†æ**ï¼šå‰ç«¯è¯·æ±‚è¿”å›404ï¼Œè¯´æ˜è¯·æ±‚æ²¡æœ‰æˆåŠŸä»£ç†åˆ°åç«¯æˆ–åç«¯æœåŠ¡æœªå¯åŠ¨ã€‚

---

## âœ… æ’æŸ¥æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨

**åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ**ï¼š

```bash
# æµ‹è¯•åç«¯APIæ˜¯å¦å¯è®¿é—®
curl http://localhost:9090/api/video/play-auth/e0555dd6d43d71f0803f5017f0f80102
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… **æˆåŠŸ**ï¼šè¿”å›JSONæ•°æ® `{"code":"200","msg":"æˆåŠŸ",...}`
- âŒ **å¤±è´¥**ï¼š`Connection refused` æˆ– `Empty reply` â†’ **åç«¯æœªå¯åŠ¨**

---

### æ­¥éª¤2: å¯åŠ¨åç«¯æœåŠ¡

å¦‚æœåç«¯æœªå¯åŠ¨ï¼Œè¯·æ‰§è¡Œï¼š

```bash
cd f:\Dev\Final\acgcommunity

# æ–¹å¼1: ä½¿ç”¨Mavenè¿è¡Œ
mvn spring-boot:run

# æ–¹å¼2: å¦‚æœå·²ç»ç¼–è¯‘è¿‡ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œjar
java -jar target/acgcommunity-0.0.1-SNAPSHOT.jar

# æ–¹å¼3: åœ¨IDEä¸­è¿è¡Œ AcgcommunityApplication.java ä¸»ç±»
```

**éªŒè¯åç«¯å¯åŠ¨æˆåŠŸ**ï¼š
åœ¨æµè§ˆå™¨è®¿é—® `http://localhost:9090/api/video/play-auth/e0555dd6d43d71f0803f5017f0f80102`

åº”è¯¥çœ‹åˆ°JSONå“åº”ï¼Œä¸æ˜¯404ã€‚

---

### æ­¥éª¤3: é‡å¯å‰ç«¯å¼€å‘æœåŠ¡å™¨

å¦‚æœåç«¯å·²å¯åŠ¨ä½†å‰ç«¯ä»ç„¶404ï¼Œå¯èƒ½æ˜¯ä»£ç†æœªç”Ÿæ•ˆã€‚

**åœ¨å‰ç«¯ç»ˆç«¯ä¸­**ï¼š

```bash
cd f:\Dev\Final\acg-community-web

# 1. åœæ­¢å½“å‰å‰ç«¯æœåŠ¡ï¼ˆCtrl+Cï¼‰
# 2. é‡æ–°å¯åŠ¨
npm run dev
```

> [!IMPORTANT]
> **ä¿®æ”¹ `vite.config.js` åå¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨ï¼**

---

### æ­¥éª¤4: éªŒè¯ä»£ç†é…ç½®

`vite.config.js` ä¸­çš„ä»£ç†é…ç½®æ˜¯æ­£ç¡®çš„ï¼š

```javascript
proxy: {
  '/api': {
    target: 'http://localhost:9090',
    changeOrigin: true
  }
}
```

è¿™ä¸ªé…ç½®ä¼šå°†ï¼š
- `http://localhost:5173/api/xxx` 
- ä»£ç†åˆ° â†’ `http://localhost:9090/api/xxx`

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: åç«¯å¯åŠ¨å¤±è´¥

**æ£€æŸ¥**ï¼š
- ç«¯å£9090æ˜¯å¦è¢«å ç”¨ï¼Ÿ
- æ•°æ®åº“æ˜¯å¦å¯åŠ¨ï¼Ÿ
- Mavenä¾èµ–æ˜¯å¦ä¸‹è½½å®Œæˆï¼Ÿ

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨ï¼ˆWindowsï¼‰
netstat -ano | findstr :9090

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ application.yml ä¸­çš„ç«¯å£
```

### é—®é¢˜2: CORSè·¨åŸŸé”™è¯¯

å¦‚æœçœ‹åˆ° `CORS policy` é”™è¯¯ï¼Œéœ€è¦åœ¨åç«¯æ·»åŠ CORSé…ç½®ã€‚

**åˆ›å»º CorsConfig.java**ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰ï¼š
```java
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOrigins("http://localhost:5173")
                .allowedMethods("*")
                .allowCredentials(true);
    }
}
```

### é—®é¢˜3: ç½‘ç»œè¯·æ±‚è¢«æµè§ˆå™¨ç¼“å­˜

æŒ‰ `Ctrl+Shift+R` å¼ºåˆ¶åˆ·æ–°é¡µé¢ï¼Œæˆ–åœ¨å¼€å‘è€…å·¥å…·ä¸­å‹¾é€‰ "Disable cache"ã€‚

---

## ğŸ§ª å®Œæ•´æµ‹è¯•æµç¨‹

### 1. æµ‹è¯•åç«¯ï¼ˆç‹¬ç«‹æµ‹è¯•ï¼‰

```bash
# ç»ˆç«¯1: åç«¯
cd f:\Dev\Final\acgcommunity
mvn spring-boot:run

# ç­‰å¾…å¯åŠ¨æˆåŠŸï¼Œçœ‹åˆ°ç±»ä¼¼æ—¥å¿—ï¼š
# Started AcgcommunityApplication in X.XXX seconds
```

**æµ‹è¯•API**ï¼š
```bash
# ä½¿ç”¨curlæˆ–æµè§ˆå™¨è®¿é—®
curl http://localhost:9090/api/video/play-auth/e0555dd6d43d71f0803f5017f0f80102
```

### 2. æµ‹è¯•å‰ç«¯ï¼ˆéœ€è¦åç«¯è¿è¡Œï¼‰

```bash
# ç»ˆç«¯2: å‰ç«¯
cd f:\Dev\Final\acg-community-web
npm run dev

# ç­‰å¾…å¯åŠ¨æˆåŠŸï¼Œçœ‹åˆ°ï¼š
# âœ  Local:   http://localhost:5173/
```

### 3. æµè§ˆå™¨æµ‹è¯•

1. æ‰“å¼€ `http://localhost:5173`
2. è¿›å…¥ä»»æ„å‰§é›†è¯¦æƒ…é¡µ
3. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ Networkæ ‡ç­¾
4. åˆ·æ–°é¡µé¢
5. æŸ¥æ‰¾ `play-auth` è¯·æ±‚ï¼š
   - **Status: 200** âœ… æˆåŠŸ
   - **Status: 404** âŒ åç«¯æœªå¯åŠ¨æˆ–è·¯ç”±é”™è¯¯
   - **Status: 500** âŒ åç«¯ä»£ç é”™è¯¯

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

- [ ] åç«¯æœåŠ¡åœ¨9090ç«¯å£æ­£å¸¸è¿è¡Œ
- [ ] ç›´æ¥è®¿é—®åç«¯APIè¿”å›æ­£ç¡®çš„JSON
- [ ] å‰ç«¯å¼€å‘æœåŠ¡å™¨å·²é‡å¯
- [ ] æµè§ˆå™¨å·²æ¸…é™¤ç¼“å­˜æˆ–ç¡¬åˆ·æ–°
- [ ] Networkæ ‡ç­¾ä¸­çœ‹åˆ° `/api/video/play-auth/...` è¯·æ±‚
- [ ] è¯·æ±‚çŠ¶æ€ç ä¸º200

---

## ğŸ†˜ å¦‚æœä»ç„¶æ— æ³•è§£å†³

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **åç«¯å¯åŠ¨æ—¥å¿—**ï¼ˆæœ€å10è¡Œï¼‰
2. **æµè§ˆå™¨Networkæ ‡ç­¾æˆªå›¾**ï¼ˆæ˜¾ç¤ºè¯·æ±‚è¯¦æƒ…ï¼‰
3. **åç«¯æ˜¯å¦èƒ½ç›´æ¥è®¿é—®**ï¼š`curl http://localhost:9090/api/video/play-auth/...` çš„ç»“æœ

æˆ‘ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯è¿›ä¸€æ­¥è¯Šæ–­ï¼
